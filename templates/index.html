<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Emotional ayoda</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Orbitron&display=swap');
  body {
    margin:0;padding:0;
    background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
    font-family: 'Orbitron', monospace;
    color:#00fff7;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    min-height:100vh;
    overflow:hidden;
  }
  h1 {
    font-weight:400;
    font-size:3rem;
    text-shadow:0 0 8px #00fff7aa;
    margin:1rem 0 0.5rem 0;
    user-select:none;
  }
  #status {
    font-size:1.25rem;
    letter-spacing:2px;
    margin-bottom:1rem;
    text-shadow:0 0 5px #00fff7cc;
    transition: all 0.6s ease-in-out;
  }
  #video-container {
    position:relative;
    width:640px;
    height:480px;
    border-radius: 20px;
    box-shadow: 0 0 30px #00fff7cc;
    overflow:hidden;
  }
  #video-feed {
    width:100%;
    height:100%;
    object-fit:cover;
    border-radius:20px;
    filter: drop-shadow(0 0 8px #00fff7);
  }
  #meme {
    position:absolute;
    top:15px;
    left:15px;
    width:150px;
    height:150px;
    border-radius:15px;
    box-shadow:0 0 15px #00fff7cc;
    user-select:none;
    pointer-events:none;
    filter: drop-shadow(0 0 10px #00fff7aa);
  }
  #spotify-login {
    margin-top:20px;
    background:#00fff7;
    color:#000;
    border:none;
    padding:12px 28px;
    font-weight:600;
    border-radius:30px;
    cursor:pointer;
    box-shadow: 0 0 15px #00fff7bb;
    transition: background 0.3s ease;
    user-select:none;
  }
  #spotify-login:hover {
    background:#00b0a7;
  }
</style>
</head>
<body>
  <h1>ðŸš€ Emotional ayoda</h1>
  <div id="status">Detecting mood...</div>
  <div id="video-container">
    <img id="meme" src="{{meme}}" alt="Mood Meme" />
    <img id="video-feed" src="/video_feed" alt="Live Video Feed" />
  </div>
  <button id="spotify-login">Login to Spotify</button>

<script>
  const statusEl=document.getElementById('status')
  const memeEl=document.getElementById('meme')
  const loginBtn=document.getElementById('spotify-login')

  async function updateStatus(){
    try {
      let res=await fetch('/status')
      let data=await res.json()
      statusEl.style.opacity=0
      setTimeout(()=>{
        statusEl.textContent=`Emotion: ${data.emotion.toUpperCase()} | Gender: ${data.gender.toUpperCase()}`
        memeEl.src=data.meme || ''
        statusEl.style.opacity=1
      },600)
    }catch{}
  }

  loginBtn.onclick=()=>window.location.href='/login'

  updateStatus()
  setInterval(updateStatus,3500)
</script>
</body>
</html>
